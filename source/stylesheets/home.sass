\:root
  --pagination-background: transparent
  --pagination-page-background: var(--primary-text-color)
  --pagination-active-page: var(--primary-text-color)

.home-welcome
  display: grid
  border-radius: var(--border-radius)
  color: var(--welcome-header-text-color)
  position: relative
  align-items: center
  padding: 0 20px
  margin-bottom: 80px

  &.stacked
    grid-template-rows: 1fr
    isolation: isolate

    .welcome-image
      grid-area: 1 / 1
      z-index: 1

    .home-slideshow
      grid-area: 1 / 1
      z-index: 6

    .welcome-overlay
      grid-area: 1 / 1
      z-index: 2

    .welcome-message
      grid-area: 1 / 1
      z-index: 7
      position: relative

  @media screen and (max-width: $break-small)
    border-radius: 0
    margin-bottom: 50px
    padding: 0

.welcome-message
  font-size: 3em
  text-align: center
  padding: 0 var(--spacing-unit)
  width: 100%
  // Allow clicks to pass through when hero link is present
  pointer-events: #{"{% if theme.hero_link != blank %} none {% else %} auto {% endif %}"}

  @media screen and (max-width: $break-medium)
    font-size: 2.5em

  @media screen and (max-width: $break-small)
    font-size: 1.75em

.welcome-image
  border-radius: var(--border-radius)
  display: block
  margin: 0 auto
  width: 100%

  @media screen and (max-width: $break-small)
    border-radius: 0

.welcome-overlay
  width: 100%
  height: 100%
  margin: 0 auto
  display: block
  // Background color based on brightening or darkening
  background: #{"{% if theme.welcome_overlay_opacity == 'very_bright' or theme.welcome_overlay_opacity == 'bright' %} white {% else %} black {% endif %}"}
  // Handle each specific case
  opacity: #{"{% if theme.welcome_overlay_opacity == 'very_bright' %} 0.8 {% endif %}"}
  opacity: #{"{% if theme.welcome_overlay_opacity == 'bright' %} 0.3 {% endif %}"}
  opacity: #{"{% if theme.welcome_overlay_opacity == 'none' %} 0 {% endif %}"}
  opacity: #{"{% if theme.welcome_overlay_opacity == 'dark' %} 0.4 {% endif %}"}
  opacity: #{"{% if theme.welcome_overlay_opacity == 'very_dark' %} 0.7 {% endif %}"}
  // Allow clicks to pass through when hero link is present
  pointer-events: #{"{% if theme.hero_link != blank %} none {% else %} auto {% endif %}"}

#main 
  .featured-container
    margin: 20px auto 48px auto
    max-width: 1024px

  .featured-title
    margin-bottom: 0

  .featured-message
    text-align: center
    margin: 20px auto 40px auto
    padding: 0 1.5rem

    ol, ul
      text-align: left
      margin: 1em auto
      max-width: 600px
      padding-left: 2.5em

      ol, ul
        margin: 0.5em 0
        padding-left: 1.5em

    ul
      list-style: disc

    ol
      list-style: decimal

    a
      text-decoration: underline
      text-underline-offset: 3px

    img
      display: inline-block
      max-width: 100%
      margin: 0 auto
      padding-bottom: 16px
    
    iframe
      display: block
      margin: 0 auto
      max-width: 100%
      margin-bottom: 16px

.featured-category
  display: flex
  background-color: var(--accent-background-color)
  margin-bottom: 40px
  padding: 60px
  gap: 60px

  @media screen and (max-width: $break-small)
    flex-direction: column
    height: auto
    max-height: none
    padding: 30px
    gap: 30px

.featured-category-info
  display: flex
  align-items: center
  flex-direction: column
  justify-content: center
  flex: 1
  font-size: 1.7em
  gap: 50px

a.featured-category-button
  font-size: 1rem
  max-width: 275px
  position: relative
  width: 100%

  @media screen and (max-width: $break-small)
    display: none

  &.mobile-button
    display: none

    @media screen and (max-width: $break-small)
      margin: 20px auto 20px
      display: grid

.featured-category-products
  display: flex
  align-items: flex-start
  flex-direction: column
  justify-content: space-between
  flex: 1
  position: relative

.featured-category-product
  flex-shrink: 1
  height: 60%
  max-height: 400px
  max-width: 400px
  width: 60%
  z-index: 2

  @media screen and (max-width: $break-small)
    max-height: none
    max-width: none

  &.single-featured-product
    align-self: center
    height: auto
    max-height: 100%
    max-width: 100%
    width: auto

  img
    display: block
    height: 100%
    object-fit: contain
    width: 100%

  &:nth-child(2)
    align-self: flex-end
    margin-top: -25%
    z-index: 1

    @media screen and (max-width: $break-small)
      margin-top: -25%

    &:hover
      z-index: 3

#home .product-list-container
  padding: 0 20px

a.button.all-products-button
  margin-top: 48px

  @media screen and (max-width: $break-small)
    max-width: calc(100% - var(--spacing-unit) * 2)

.home-slideshow
  background: var(--welcome-background-color)

  .splide__slide
    width: 100%

    &::before
      content: ""
      position: absolute
      top: 0
      left: 0
      width: 100%
      // Important: Make height only cover the slide image, not the pagination area
      height: 100%
      z-index: 2
      // Background color based on brightening or darkening
      background: #{"{% if theme.welcome_overlay_opacity == 'very_bright' or theme.welcome_overlay_opacity == 'bright' %} white {% else %} black {% endif %}"}
      // Handle each specific case
      opacity: #{"{% if theme.welcome_overlay_opacity == 'very_bright' %} 0.8 {% endif %}"}
      opacity: #{"{% if theme.welcome_overlay_opacity == 'bright' %} 0.3 {% endif %}"}
      opacity: #{"{% if theme.welcome_overlay_opacity == 'none' %} 0 {% endif %}"}
      opacity: #{"{% if theme.welcome_overlay_opacity == 'dark' %} 0.4 {% endif %}"}
      opacity: #{"{% if theme.welcome_overlay_opacity == 'very_dark' %} 0.7 {% endif %}"}

  .slideshow-image
    border-radius: var(--border-radius)
    width: 100%

  .splide__arrow
    border-radius: var(--border-radius)
    width: 2em
    height: 3em
    z-index: 15
    opacity: 0
    transition: opacity 0.2s
    background: rgba(255, 255, 255, 0.5)
    border: 1px solid rgba(0, 0, 0, 0.1)
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15)
    // Position arrows to center on the image area, excluding pagination space
    top: calc(50% - 15px)
    transform: translateY(-50%)
    
    svg
      fill: #262626
      transition: fill 0.2s

    &:hover svg
      fill: #000

    &:not(:disabled):hover
      opacity: 1
      background: rgba(255, 255, 255, 0.95)

  .splide__pagination
    z-index: 3
    background: var(--pagination-background)
    border-radius: 18px
    display: inline-flex
    position: absolute
    bottom: -40px
    align-items: center
    justify-content: center
    transform: translateX(-50%)
    left: 50%
    padding: 4px 8px
    gap: 2px
    right: auto

    li
      display: flex

    .splide__pagination__page
      opacity: 1
      background: none
      border: 1px solid var(--pagination-page-background)
      height: 10px
      width: 10px

      &.is-active
        background: var(--pagination-active-page)
        transform: scale(1.1)

// Show arrows on hover of parent welcome container or slideshow itself - always, regardless of autoplay setting
.home-welcome:hover,
.home-welcome:focus-within,
.home-slideshow:hover,
.home-slideshow:focus-within
  .splide__arrow:not(:disabled)
    opacity: 0.8

// Hero clickable styling
.hero-clickable
  cursor: pointer

  &:hover
    opacity: 0.9
    transition: opacity 0.2s ease